<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/menu.css">
    <link rel="stylesheet" href="../css/prototype.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Comfortaa:wght@300;400;500;600;700&family=Vazirmatn&display=swap"
        rel="stylesheet">
    <title>Task Tracker</title>
</head>

<body>

    <div class="menu-wrap">
        <input type="checkbox" class="toggler">
        <div class="hamburger">
            <div></div>
        </div>
        <div class="menu">
            <ul>
                <hr>
                <li><a href="../">Home</a></li>
                <li><a href="../pages/download.html">Download</a></li>
                <li><a href="../pages/about.html">About</a></li>
                <hr>
                <li><a href="" target="_blank">Discord</a></li>
                <li><a href="https://github.com/ArchLeaders" target="_blank">GitHub</a></li>
            </ul>
        </div>
    </div>

    <header class="showcase">
        <div class="header">
            <ul class="header-menu">
                <li><a href="../"><img src="../res/icon.svg" height="35px"></a></li>
                <li><a href="../">Home</a></li>
                <li><a href="../pages/download.html">Download</a></li>
                <li><a href="../pages/about.html">About</a></li>
            </ul>
            <a href="../" class="title">
                Task Tracker
            </a>
            <ul class="header-menu links">
                <li>
                    <a href="" target="_blank">
                        <img src="../res/discord-icon.svg" height="35px">
                    </a>
                    <div></div>
                </li>
                <li>
                    <a href="https://github.com/ArchLeaders" target="_blank">
                        <img src="../res/github-icon.svg" height="35px">
                    </a>
                    <div></div>
                </li>
            </ul>
        </div>
        <div class="container showcase-inner">
            <h1>Prototype</h1>
            <p>

            </p>
            <a href="#outline" class="btn">Read More</a>
        </div>
    </header>
    <hr class="gradient-split">
    <section id="outline">
        <h1>Outline</h1>
        <ul class="inner-list first-level-ul">
            <li><a href="#data-storage">Data Storage</a></li>
            <ul class="inner-list">
                <li><a href="#data-storage-1">Iteration #1</a></li>
                <li><a href="#data-storage-2">Iteration #2</a></li>
                <ul class="inner-list">
                    <li><a href="#data-storage-2-global-list">Global List</a></li>
                    <li><a href="#data-storage-2-local-settings">Local Settings</a></li>
                </ul>
                <li><a href="#data-storage-3">Iteration #3</a></li>
            </ul>
            <br>
            <li><a href="#task-tracking">Task Handling</a></li>
            <ul class="inner-list">
                <li><a href="#task-tracking-1">Iteration #1</a></li>
            </ul>
            <br>
            <li><a href="#server-configuration">Server Configuration</a></li>
            <ul class="inner-list">
                <li><a href="#server-configuration-1">Iteration #1</a></li>
            </ul>
        </ul>
    </section>
    <hr class="gradient-split">
    <section id="data-storage" class="iter-data">
        <h1>DS: Data Storage</h1>
        <div>
            For Task Tracker to function on a mass scale, it needs to have definable tasks than run on a per-server basis.
            This means the information for each serverâ€™s tasks needs to be stored somewhere.
            <br><br>
            This section goes through each attempt of solving this issue.
            <br><br>

            <!-- Header 1 -->
            <h2 id="data-storage-1">DS: Iteration #1</h2><hr>
            The first iteration used a global database to store server data. I worked on this concept for some time
            before realizing I obviously could not store a database of possibly private information that I could access.
            <br><br>

            <!-- Header 2 -->
            <h2 id="data-storage-2">DS: Iteration #2</h2><hr>
            The second and last iteration uses a mix of local data and a global list to define the server data (tasks).
            <br><br>
            As an example, to register the bot, you would first invite it via a special link. Once in the server run the
            register command (as will be documented) to register your server.
            <br><br>
            This command will write the default settings to a private (excluding server admins/owner) channel and add
            the ID to the global list, after that
            completes, a help message to get started with the SetupWizard is displayed to the user.
            <br><br><br>

            <!-- Header 2.1 -->
            <b id="data-storage-2-global-list">- Global List</b> | <a style="text-decoration: underline;" href="../res/data/global-list.jsonc">JSON</a><br><br>
            The global list is a JSON file hosted on a private discord server.
            <br>
            This file contains no personal information, only a dictionary of channel IDs with a value of 0.
            It is created like this so no duplicates can be made.
            <br><br>
            Each channel ID references a channel in which a local settings file exists.
            <br><br>
            When the code to execute tasks runs, it iterates through this dictionary and adds a new async function for
            each channel.
            <br>
            The async function downloads the local settings and parses them; if any tasks are set to run at
            <p class="code-inline">DateTime.Now</p> they are executed accordingly.
            <br><br><br>

            <!-- Header 2.2 -->
            <b id="data-storage-2-local-settings">- Local Settings</b> | <a style="text-decoration: underline;" href="../res/data/local-settings.jsonc">JSON</a><br><br>
            The local settings file is also a JSON file, but it is hosted in the server (local to that server).
            <br>
            This file contains two primary indexes, "vars" and "tasks" and one property "timezone".
            <br><br>
            The Vars dictionary holds user-defined variables that can be used in the task message.
            <br><br>
            Tasks define what happens at any point in time. Only a basic notification system is implemented
            as of now, but over time it could expand to support a broader range of things.
            <br><br>
            All of this data will be formatted by the SetupWizard where you can add/remove tasks and variables.
            <br><br>

            <!-- Header 3 -->
            <h2 id="data-storage-3">DS: Iteration #3</h2><hr>
            In the original server settings, tasks were defined as a <p class="code-inline">Dictionary&lt;string, Dictionary&lt;string, dynamic&gt;&gt;</p>,
            the first <p class="code-inline">string</p> being the DateTime.
            <br><br>
            This needs to be removed because all dictionary keys <ins>must</ins> be unique, having only one task per time, we are restricted from running multiple tasks at any given time.
            <br>
            The new solution is to add the time as a property inside the dictionary and give a unique hex-based id to each task. |
            <a style="text-decoration: underline;" href="../res/data/local-settings-i3.jsonc">Download updated JSON data.</a>
        </div>
    </section>
    <section id="task-tracking" class="iter-data">
        <h1>TH: Task Handling</h1>
        <div>
            Efficiently tracking tasks is essential for this program. Because it is done so often (every minute),
            it needs to execute quickly to be finished before the minute is up. This will be done with asyncio, a python package for thread management.
            <br><br>
            The following section goes through each attempt of solving this issue.
            <br><br>
            
            <!-- Header 1 -->
            <h2 id="task-tracking-1">TH: Iteration #1</h2><hr>
            The first iteration in this section proposes a system where each server is handled on its own thread, so they are all done at the same time.
            <br><br>
            <a style="text-decoration: underline;" href="https://github.com/ArchLeaders/TaskTracker/blob/master/src/cogs/events.py#L25-L41">Python Code ></a>
            <br><br>
            The <p class="code-inline">handle_server</p> function parses the local settings and iterates the tasks with a similar method as defined above.
            <br><br>
            <a style="text-decoration: underline;" href="https://github.com/ArchLeaders/TaskTracker/blob/master/src/cogs/events.py#L43-L77">Python Code ></a>
        </div>
    </section>
    <section id="server-configuration" class="iter-data">
        <h1>SC: Server Configuration</h1>
        <div>

            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo, obcaecati!
            <br><br>
                        
            <!-- Header 1 -->
            <h2 id="server-configuration-1">SC: Iteration #1</h2><hr>
            Lorem ipsum dolor sit amet consectetur adipisicing elit. Quo, obcaecati!
            <br><br>
        </div>
    </section>
</body>

</html>